# AI自動日報生成ツール (Mac用)

Macの画面を定期的にキャプチャして文字認識(OCR)を行い、作業ログを記録するツールです。Googleカレンダーの予定と合わせて、AI（ChatGPT等）に日報を書かせるためのプロンプトを生成します。

## 特徴
- **自動記録**: 1分ごとに画面のテキストとアクティブなアプリ名を記録。
- **プライバシー重視**: スクリーンショット画像は保存せず、テキスト情報のみをローカルに保存します。
- **Googleカレンダー連携**: 今日の予定を取得し、作業ログとの乖離を確認できます。
- **AI連携**: 蓄積したログから、ChatGPT等に投げるためのプロンプトを自動生成します。

## 必要要件
- macOS (Vision Frameworkを使用するため)
- Python 3.x
- Google Cloud Project (Calendar API用)

## セットアップ手順

### 1. 必要なライブラリのインストール

ターミナルで以下のコマンドを実行し、依存ライブラリをインストールしてください。

```bash
pip install -r requirements.txt
```

### 2. GoogleカレンダーAPIの設定

Googleカレンダーの予定を取得するために、以下の設定が必要です。

1. [Google Cloud Console](https://console.cloud.google.com/) で新しいプロジェクトを作成します。
2. 「**API とサービス**」 > 「**ライブラリ**」から **Google Calendar API** を検索し、有効化します。
3. 「**API とサービス**」 > 「**認証情報**」で **OAuth クライアント ID** を作成します（アプリケーションの種類は **デスクトップ アプリ**）。
4. クライアントIDを作成したら、JSON形式の認証情報をダウンロードし、ファイル名を `credentials.json` に変更して、このプロジェクトのルートディレクトリに配置してください。

> **注意**: 初回実行時にブラウザが立ち上がり、Googleアカウントへのアクセス許可が求められます。

### 3. Macの権限設定

このツールは画面の内容を読み取るため、以下の権限が必要です。

- **画面収録 (Screen Recording)**: ターミナル（または実行するIDE）に許可を与えてください。
  - 「システム設定」 > 「プライバシーとセキュリティ」 > 「画面収録」
- **アクセシビリティ (Accessibility)**: 必要に応じて許可してください。

## 使い方

### 記録の開始

以下のコマンドでログの記録を開始します。終了等は `Ctrl+C` で行います。

```bash
python main.py
```

実行中は `logs/` ディレクトリに `daily_log_YYYY-MM-DD.jsonl` というJSONLファイルが生成され、1分ごとに追記されます。

### 日報プロンプトの生成

1日の終わりに以下のコマンドを実行すると、その日のログとカレンダー予定をまとめたプロンプトが生成されます。

```bash
python daily_report.py
```

実行後、`daily_report_prompt.txt` というファイルが生成されます。このファイルの中身をコピーして、ChatGPTやClaudeなどのAIチャットに貼り付けてください。

## ファイル構成

- `main.py`: 常駐してログを記録するメインスクリプト
- `daily_report.py`: 日報用プロンプトを生成するスクリプト
- `ocr_utils.py`: 画面キャプチャとOCR処理
- `app_utils.py`: アクティブウィンドウ名の取得
- `calendar_utils.py`: Googleカレンダー連携
- `requirements.txt`: 依存ライブラリ一覧
